util

Fix race condition

# Update documentation

# Add type hints
